<html>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <body>
    <script>

    var width = 960;
    var height = 960;

    var svg = d3.select("body")
      .append("svg")
      .attr("width", width)
      .attr("height", height);
    
    var cal = d3.json("https://raw.githubusercontent.com/GregHarrison/CS498-Narrative-Vis/master/ca.json");
    var cal_fires = d3.csv("https://raw.githubusercontent.com/GregHarrison/CS498-Narrative-Vis/master/California_Fire_Incidents.csv");

    Promise.all([cal, cal_fires]).then(function(values){
      
      var projection = d3.geoConicEqualArea().parallels([34, 40.5]).rotate([120,0]).fitSize([width,height], values[0]);
      
      var path = d3.geoPath().projection(projection);

      svg.append("path")
        .attr("d", path(values[0]))
        .attr("fill", "#e5e5e5")
        .attr("stroke", "black")
        .attr("stroke-width", ".5px");
      
      svg.selectAll("circle")
        .data(values[1])
        .enter()
        .append("circle")
        .attr("cx", function(d) { return projection([d.Longitude,d.Latitude])[0]; })
        .attr("cy", function(d) { return projection([d.Longitude,d.Latitude])[1]; })
        .attr("r", "3px")
        .attr("fill", "red");
    });

    </script>
  </body>
</html>